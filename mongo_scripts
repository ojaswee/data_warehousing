#to make \t data to csv
#sed 's/\t/,/g'  CosmicCodingMuts.txt > CosmicCodingMuts.csv

#From  https://www.digitalocean.com/community/tutorials/how-to-install-mongodb-on-centos-7
#install mongodb
#create a .repo file for yum, the package management utility for CentOS:

sudo gedit /etc/yum.repos.d/mongodb-org.repo

#in the gedit file add reposetory information
[mongodb-org-3.4]
name=MongoDB Repository
baseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/3.4/x86_64/
gpgcheck=1
enabled=1
gpgkey=https://www.mongodb.org/static/pgp/server-3.4.asc

#save and close the file 

#verify that the MongoDB repository exists within the yum utility.

yum repolist

#install mongodb using yum

sudo yum install mongodb-org

#start mongodb with systemstl utility
sudo systemctl start mongod

#to start/stop/relod mongodb
sudo systemctl reload mongod

# checkthe mongod.log file with the tail command
sudo tail /var/log/mongodb/mongod.log

#access the database server with the MongoDB Shell
mongo

#list of methods for the db object
db.help()

#import data to mongodb
mongoimport --db cancer --collection cosmic2 --type csv --headerline --file /home/ojaswee/mysql/database/CosmicCodingMuts.csv

//not good option takes long time more then 4mins
db.cosmic.copyTo("cosmic3")


# Profiling in mongodb
db.setProfilingLevel(2)

db.cosmic.find({"CHROM" :20 , "POS":96030 , "REF":"G" , "ALT":"A"})

db.system.profile.find().limit(5).pretty()

db.system.profile.findOne().millis

# find first 2 documents
db.cosmic.find( {} ).limit( 2 );
db.cosmic.find( {"CHROM": 1} ).limit( 2 );


#create an index in ascending order (-1 for descending order) 
db.cosmic2.ensureIndex({"chromosome":1})

#create index on multiple fields
db.cosmic5.ensureIndex({"chromosome":1,"position":-1, "refe":1,"alt":1})

#sutdown mongod server
service mongod stop

#quit the shell without closing mongod process
exit








